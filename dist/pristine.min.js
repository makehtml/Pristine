!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).Pristine=r()}(this,(function(){"use strict";var e={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function r(e,r){for(;(e=e.parentElement)&&!e.classList.contains(r););return e}function t(e){var r=arguments;return this.replace(/\${([^{}]*)}/g,(function(e,t){return r[t]}))}function n(e){return e.pristine.form.querySelectorAll('input[name="'+e.getAttribute("name")+'"]:checked').length}function i(e,r){for(var t in r)t in e||(e[t]=r[t]);return e}var s={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},a="input:not([type^=hidden]):not([type^=submit]), select, textarea",o=["required","min","max","minlength","maxlength","pattern"],l=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,u=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,f="en",c={},p=function(e,r){r.name=e,void 0===r.priority&&(r.priority=1),c[e]=r};function m(n){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n.setAttribute("novalidate","true");var m=i(l||{},s),d=!1;console.log(this);var h=Array.from(n.querySelectorAll(a)).map((function(e){var r=[],t={},i={};return Array.from(e.attributes).forEach((function(e){if(/^data-pristine-/.test(e.name)){var n=e.name.substr(14),s=n.match(u);if(null!==s){var a=void 0===s[1]?"en":s[1];return i.hasOwnProperty(a)||(i[a]={}),void(i[a][n.slice(0,n.length-s[0].length)]=e.value)}"type"===n&&(n=e.value),v(r,t,n,e.value)}else~o.indexOf(e.name)?v(r,t,e.name,e.value):"type"===e.name&&v(r,t,e.value)})),r.sort((function(e,r){return r.priority-e.priority})),p&&e.addEventListener(~["radio","checkbox"].indexOf(e.getAttribute("type"))?"change":"input",(function(e){d&&g(e.target)})),e.pristine={input:e,validators:r,params:t,form:n,messages:i}}));function v(e,r,t,n){var i=c[t];if(i&&(e.push(i),n)){var s="pattern"===t?[n]:n.split(",");s.unshift(null),r[t]=s}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=h;e?e instanceof HTMLElement?t=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(t=Array.from(e).map((function(e){return e.pristine}))):d=!0;var n=!0;return t.forEach((function(e){T(e)?!r&&L(e):(n=!1,!r&&q(e))})),n}function y(e){if(!e){for(var r=[],t=0;t<h.length;t++){var n=h[t];n.errors.length&&r.push({input:n.input,errors:n.errors})}return r}return e.tagName&&"select"===e.tagName.toLowerCase()?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors}function T(r){for(var n=[],i=!0,s=0;r.validators[s];s++){var a=r.validators[s],o=r.params[a.name]?r.params[a.name]:[];if(o[0]=r.input.value,!a.fn.apply(r.input,o)&&(i=!1,"function"==typeof a.msg?n.push(a.msg(r.input.value,o)):"string"==typeof a.msg?n.push(t.apply(a.msg,o)):a.msg===Object(a.msg)&&a.msg[f]?n.push(t.apply(a.msg[f],o)):r.messages[f]&&r.messages[f][a.name]?n.push(t.apply(r.messages[f][a.name],o)):e[f]&&e[f][a.name]?n.push(t.apply(e[f][a.name],o)):n.push(t.apply(e[f].default,o)),!0===a.halt))break}return r.errors=n,i}function x(e,r,t,n,i){e instanceof HTMLElement?(e.pristine.validators.push({fn:r,msg:t,priority:n,halt:i}),e.pristine.validators.sort((function(e,r){return r.priority-e.priority}))):console.warn("The parameter elem must be a dom element")}function b(e){if(e.errorElements)return e.errorElements;var t=r(e.input,m.classTo),n=null,i=null;return(n=m.classTo===m.errorTextParent?t:t.querySelector("."+m.errorTextParent))&&((i=n.querySelector(".pristine-error"))||((i=document.createElement(m.errorTextTag)).className="pristine-error "+m.errorTextClass,n.appendChild(i),i.pristineDisplay=i.style.display)),e.errorElements=[t,i]}function q(e){var r=b(e),t=r[0],n=r[1];t&&(t.classList.remove(m.successClass),t.classList.add(m.errorClass)),n&&(n.innerHTML=e.errors.join("<br/>"),n.style.display=n.pristineDisplay||"")}function A(e,r){(e=e.length?e[0]:e).pristine.errors.push(r),q(e.pristine)}function E(e){var r=b(e),t=r[0],n=r[1];return t&&(t.classList.remove(m.errorClass),t.classList.remove(m.successClass)),n&&(n.innerHTML="",n.style.display="none"),r}function L(e){var r=E(e)[0];r&&r.classList.add(m.successClass)}function C(){for(var e=0;h[e];e++)h[e].errorElements=null;Array.from(n.querySelectorAll(".pristine-error")).map((function(e){e.parentNode.removeChild(e)})),Array.from(n.querySelectorAll("."+m.classTo)).map((function(e){e.classList.remove(m.successClass),e.classList.remove(m.errorClass)}))}function w(){C(),h.forEach((function(e){delete e.input.pristine})),h=[]}function $(e){s=e}return{addError:A,addValidator:x,destroy:w,fields:h,form:n,getErrors:y,live:p,options:m,reset:C,setGlobalConfig:$,validate:g}}return p("text",{fn:function(e){return!0},priority:0}),p("required",{fn:function(e){return"radio"===this.type||"checkbox"===this.type?n(this):void 0!==e&&""!==e},priority:99,halt:!0}),p("email",{fn:function(e){return!e||l.test(e)}}),p("number",{fn:function(e){return!e||!isNaN(parseFloat(e))},priority:2}),p("integer",{fn:function(e){return!e||/^\d+$/.test(e)}}),p("minlength",{fn:function(e,r){return!e||e.length>=parseInt(r)}}),p("maxlength",{fn:function(e,r){return!e||e.length<=parseInt(r)}}),p("min",{fn:function(e,r){return!e||("checkbox"===this.type?n(this)>=parseInt(r):parseFloat(e)>=parseFloat(r))}}),p("max",{fn:function(e,r){return!e||("checkbox"===this.type?n(this)<=parseInt(r):parseFloat(e)<=parseFloat(r))}}),p("pattern",{fn:function(e,r){var t=r.match(new RegExp("^/(.*?)/([gimy]*)$"));return!e||new RegExp(t[1],t[2]).test(e)}}),p("equals",{fn:function(e,r){var t=document.querySelector(r);return t&&(!e&&!t.value||t.value===e)}}),m.addValidator=function(e,r,t,n,i){p(e,{fn:r,msg:t,priority:n,halt:i})},m.addMessages=function(r,t){var n=e.hasOwnProperty(r)?e[r]:e[r]={};Object.keys(t).forEach((function(e,r){n[e]=t[e]}))},m.setLocale=function(e){f=e},m}));
